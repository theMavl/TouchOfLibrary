{% extends 'base_generic.html' %}
{% block content %}
    {% if perms.library.change_giveout %}
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Given out documents</title>
        </head>
        <body>
        <table border="1" align="left" width="80%">
            <caption>All given out documents</caption>
            <tr>
                <th> Document</th>
                <th> Patron</th>
                <th> Due date</th>
                <th> Actions</th>
            </tr>

            {% for giveout in giveouts %}
                <tr>
                    <th><a href="{{ giveout.document.get_absolute_url }}">{{ giveout.document_instance.summary }}</a>
                    </th>
                    <th>
                        <a href="{% url 'patron-details' id=giveout.user.id %}">{{ giveout.user.first_name }} {{ giveout.user.last_name }}
                            ({{ giveout.patron.patron_type }})</a></th>
                    {% if giveout.document_instance.is_overdue %}
                        <th bgcolor="#ff6347">{{ giveout.document_instance.due_back }}</th>
                    {% else %}
                        <th>
                            {{ giveout.document_instance.due_back }}</th>
                    {% endif %}
                    <th><a href="{{ giveout.document_instance.form_return_request_mail }}">Request to return</a></th>
                </tr>
            {% endfor %}
        </table>
        </body>
        </html>
    {% else %} You are not allowed to be here
    {% endif %}
{% endblock %}
