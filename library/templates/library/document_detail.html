{% extends "base_generic.html" %}
{% block content %}
    <head>
        <style>
            .redtext {
                color: tomato;
            }

            .greentext {
                color: palegreen;
            }
        </style>
    </head>
    <h1>{{ document.title }}</h1>
    <h4>{{ document.type }}</h4>
    <p><strong>Authors:</strong> <a href=""></a>

        {% for author in document.authors.all %}
            <a href="{{ author.get_absolute_url }}">{{ author.first_name }} {{ author.last_name }}</a>
            {% if not forloop.last %},{% else %}{% endif %}
        {% endfor %}</p>

    <p><strong>Description:</strong> {{ document.description }}
    <p><strong>Tags:</strong>
        {% for tag in document.tags.all %}
            {{ tag }}
            {% if not forloop.last %},{% else %}{% endif %}
        {% endfor %}


        {% if user.is_authenticated %}
            {% if ordered %}
                <p><b>Given out to you</b></p>
            {% elif document.is_reference %}
                <p><b>Reference documents cannot be checked out.</b></p>
            {% elif wished %}
                <form action="" method="post">
                    {% csrf_token %}
                    {{ form }}
                    <input type="submit" name="cancel_order" value="Cancel order"/>
                </form>
            {% elif document.quantity > 0 %}
                <form action="" method="post">
                    {% csrf_token %}
                    {{ form }}
                    <input type="submit" name="document_order" value="Order"/>
                </form>

            {% else %}
                <p class="redtext">There are no copies in the library yet</p>
            {% endif %}


            {#Table starts:#}

            {% if copy_list and not document.is_reference %}
                <table border="1" align="left" width="80%">
                    <caption>Copies of this {{ document.type }}</caption>
                    <tr>
                        <th> Title</th>
                        <th> Location</th>
                        <th> Status</th>
                        <th> Additional</th>
                    </tr>

                    {% for copy in copy_list %}
                        <tr>
                            <th>{{ copy.document.title }}</th>
                            <th><strong>Level </strong> {{ copy.location.level }},
                                <strong>room </strong> {{ copy.location.room }}
                            </th>

                            {% if copy.status == 'a' %}
                                <th bgcolor="#90ee90" title="Boot this {{ document.type }} now!">
                                    Available for booking
                                </th>
                            {% elif copy.status == 'g' %}
                                <th bgcolor="#ff6347" title="Will be available on {{ copy.due_back }}">
                                    Given out
                                </th>
                            {% elif copy.status == 'r' %}
                                <th bgcolor="#ffa07a">
                                    Reserved
                                </th>
                            {% else %}
                                <th bgcolor="#fffff0">
                                    Maintenance
                                </th>
                            {% endif %}
                            <th>
                                {% for a in additional %}
                                    {% if forloop.counter == 1 %}
                                        <div><strong>{{ a }}: </strong> {{ copy.additional_field1 }} </div>
                                    {% elif forloop.counter == 2 %}
                                        <div><strong>{{ a }}: </strong> {{ copy.additional_field2 }} </div>
                                    {% elif forloop.counter == 3 %}
                                        <div><strong>{{ a }}: </strong> {{ copy.additional_field3 }} </div>
                                    {% elif forloop.counter == 4 %}
                                        <div><strong>{{ a }}: </strong> {{ copy.additional_field4 }} </div>
                                    {% elif forloop.counter == 5 %}
                                        <div><strong>{{ a }}: </strong> {{ copy.additional_field5 }} </div>
                                    {% endif %}
                                {% endfor %}
                            </th>
                        </tr>
                    {% endfor %}
                </table>

            {% endif %}

        {% else %} <p>To check out that {{ document.type }} you need to login</p>{% endif %}

{% endblock %}

